(function(t){function e(e){for(var s,o,n=e[0],c=e[1],l=e[2],u=0,p=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,n=1;n<a.length;n++){var c=a[n];0!==r[c]&&(s=!1)}s&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},r={app:0},i=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var d=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"458f":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("4de4"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),r=a("bc3a"),i=a.n(r),o=a("2106"),n=a.n(o),c=a("9062"),l=a.n(c),d=(a("e40d"),a("7bb1")),u=a("427f"),p=a.n(u),m=a("a925"),v=a("2f62"),h=(a("99af"),a("4160"),a("fb6a"),a("a434"),a("ac1f"),a("466d"),a("159b"),a("2909"));s["a"].use(v["a"]);var f=new v["a"].Store({strict:!0,state:{isLoading:!1,backstageProducts:[],backstageOrderList:[],paginationObj:{},orderPagination:{},alertMessage:[],allProducts:[],singleProduct:{},filterProductsList:[],sliceProductsList:[],storePages:"",staredPage:"",customCart:[]},actions:{updateLoading:function(t,e){t.commit("LOADING",e)},updateAlert:function(t,e){var a=Math.floor(new Date/1e3),s={message:e.message,status:e.status,timestamp:a};t.commit("ALERT",s),setTimeout((function(){t.commit("REMOVEALERT",a)}),5e3)},getOrderList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("hanstore","/admin/orders?page=").concat(e);t.commit("LOADING",!0),i.a.get(s).then((function(e){if(t.commit("LOADING",!1),e.data.success)t.commit("ORDERLIST",e.data.orders),t.commit("ORDERPAGINATION",e.data.pagination);else{var s="取得訂單列表失敗 !",r="danger";a.dispatch("updateAlert",{message:s,status:r})}}))},getProducts:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.paginationObj.current_page||1,a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("hanstore","/admin/products?page=").concat(e);t.commit("LOADING",!0),i.a.get(s).then((function(e){if(t.commit("LOADING",!1),e.data.success)t.commit("PRODUCTS",e.data.products),t.commit("PAGINATION",e.data.pagination);else{var s="取得產品列表失敗 !",r="danger";a.dispatch("updateAlert",{message:s,status:r})}}))},updateProducts:function(t,e){var a=e.productsObj,s=e.isAdd;t.commit("LOADING",!0);var r="".concat("https://vue-course-api.hexschool.io","/api/").concat("hanstore","/admin/product"),o="post";s||(r="".concat("https://vue-course-api.hexschool.io","/api/").concat("hanstore","/admin/product/").concat(a.id),o="put");var n=this;i.a[o](r,{data:a}).then((function(e){var a="",r="";s&&e.data.success?(a="新增產品成功 !",r="success",t.commit("LOADING",!1)):!s&&e.data.success?(a="產品資訊更新成功 !",r="success",n.dispatch("getProducts")):(a="產品資訊更新失敗 !",r="danger"),n.dispatch("updateAlert",{message:a,status:r})}))},getCustomProductsAll:function(t){t.commit("LOADING",!0);var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("hanstore","/products/all");i.a.get(a).then((function(a){if(a.data.success)t.commit("LOADING",!1),t.commit("GETALLPRODUCTS",a.data.products),t.commit("FILTERLIST","all"),t.commit("SLICELIST",1);else{t.commit("LOADING",!1);var s="取得產品資訊失敗，請稍後再試 !",r="danger";e.dispatch("updateAlert",{message:s,status:r})}}))},getSingelProduct:function(t,e){t.commit("LOADING",!0);var a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("hanstore","/product/").concat(e);i.a.get(s).then((function(e){if(t.commit("LOADING",!1),e.data.success)t.commit("SINGELPRODUCTS",e.data.product);else{var s="取得產品資訊失敗，請稍後再試 !",r="danger";a.dispatch("updateAlert",{message:s,status:r})}}))},getCart:function(t){var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("hanstore","/cart");i.a.get(a).then((function(a){if(a.data.success)t.commit("GETCART",a.data.data);else{var s="取得購物車資訊失敗，請稍後再試 !",r="danger";e.dispatch("updateAlert",{message:s,status:r})}}))},filterList:function(t,e){t.commit("FILTERLIST",e),t.commit("SLICELIST",1)},sliceList:function(t,e){t.commit("SLICELIST",e)},searchProduct:function(t,e){t.commit("SEARCHPRODUCT",e),t.commit("SLICELIST",1)}},mutations:{LOADING:function(t,e){t.isLoading=e},PRODUCTS:function(t,e){t.backstageProducts=e},PAGINATION:function(t,e){t.paginationObj=e},ALERT:function(t,e){t.alertMessage.push(e)},REMOVEALERT:function(t,e){t.alertMessage.forEach((function(a,s){a.timestamp===e&&t.alertMessage.splice(s,1)}))},ORDERLIST:function(t,e){t.backstageOrderList=e},ORDERPAGINATION:function(t,e){t.orderPagination=e},GETALLPRODUCTS:function(t,e){for(var a=Object(h["a"])(e),s=e.length-1;s>0;s-=1){var r=Math.floor(Math.random()*(s+1)),i=[a[r],a[s]];a[s]=i[0],a[r]=i[1]}t.allProducts=a},SINGELPRODUCTS:function(t,e){t.singleProduct=e},FILTERLIST:function(t,e){t.filterProductsList="all"===e?t.allProducts:t.allProducts.filter((function(t){return t.category===e})),t.storePages=Math.floor(t.filterProductsList.length/20)+1},SLICELIST:function(t,e){t.sliceProductsList=t.filterProductsList.slice(20*(e-1),20*e),t.staredPage=e},SEARCHPRODUCT:function(t,e){var a=t.allProducts.filter((function(t){return t.title.match(e)}));t.filterProductsList=a,t.storePages=Math.floor(t.filterProductsList.length/20)+1},GETCART:function(t,e){t.customCart=e}}}),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("router-view")],1)},_=[],b={name:"App",computed:{isLoading:function(){return this.$store.state.isLoading}}},C=b,y=(a("5c0b"),a("2877")),P=Object(y["a"])(C,g,_,!1,null,null,null),x=P.exports,w=(a("4989"),a("8c4f")),k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-8 py-4"},[a("h4",{staticClass:"text-center mb-4"},[t._v("管理員登入")]),a("form",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useremail"}},[t._v("Email address")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"email",id:"useremail"},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"password"}},[t._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),a("button",{staticClass:"btn btn-outline-secondary w-100 mt-3",attrs:{type:"submit"},on:{click:t.userLogin}},[t._v("Login")])])]),a("alert")],1)},$=[],L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"position-fixed",staticStyle:{right:"20px","z-index":"1500"}},t._l(t.alertMessage,(function(e){return a("div",{key:e.timestamp,staticClass:"alert border alert-dismissible fade show",class:"alert-"+e.status,attrs:{role:"alert"}},[t._v(" "+t._s(e.message)+" "),t._m(0,!0)])})),0)},O=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],E={computed:{alertMessage:function(){return this.$store.state.alertMessage}}},A=E,S=Object(y["a"])(A,L,O,!1,null,null,null),I=S.exports,N={name:"login",components:{alert:I},data:function(){return{user:{username:"",password:""}}},methods:{userLogin:function(){this.$store.dispatch("updateLoading",!0);var t="".concat("https://vue-course-api.hexschool.io","/admin/signin"),e=this;this.$http.post(t,e.user).then((function(t){if(t.data.success)document.cookie="hanCookie=".concat(t.data.token,"; expires=").concat(new Date(t.data.expired),";"),e.$router.push("/admin");else{var a="登入失敗 !",s="danger";e.$store.dispatch("updateAlert",{message:a,status:s})}e.$store.dispatch("updateLoading",!1)}))}}},T=N,j=Object(y["a"])(T,k,$,!1,null,"4d979300",null),D=j.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("navbar"),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("sidebar"),a("main",{staticClass:"col-md-9 ml-sm-auto col-lg-10 px-md-4",attrs:{role:"main"}},[a("alert"),a("router-view")],1)],1)])],1)},M=[],U=(a("5319"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow"},[t._m(0),t._m(1),a("ul",{staticClass:"navbar-nav px-3"},[a("li",{staticClass:"nav-item text-nowrap"},[a("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:t.signOut}},[t._v("Sign out")])])])])}),G=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"navbar-brand col-md-3 col-lg-2 mr-0 px-2",attrs:{href:"#"}},[a("i",{staticClass:"far fa-gem"}),t._v(" SUNSET 後台系統 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler position-absolute d-md-none collapsed",attrs:{type:"button","data-toggle":"collapse","data-target":"#sidebarMenu","aria-controls":"sidebarMenu","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],q={methods:{signOut:function(){this.$store.dispatch("updateLoading",!0);var t="".concat("https://vue-course-api.hexschool.io","/logout"),e=this;this.$http.post(t).then((function(t){if(t.data.success){e.$store.dispatch("updateLoading",!1),e.$router.push("login");var a="您已成功登出 !",s="secondary";e.$store.dispatch("updateAlert",{message:a,status:s})}else{var r="登出失敗 !",i="danger";e.$store.dispatch("updateAlert",{message:r,status:i})}}))}}},B=q,F=Object(y["a"])(B,U,G,!1,null,null,null),H=F.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"col-md-3 col-lg-2 d-md-block bg-light sidebar collapse",attrs:{id:"sidebarMenu"}},[a("div",{staticClass:"sidebar-sticky pt-3"},[a("ul",{staticClass:"nav flex-column"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",class:{active:"/admin"==t.$route.path},attrs:{href:"#",to:"/admin"}},[t._v(" ProductsList ")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",class:{active:"/admin/addProducts"==t.$route.path},attrs:{href:"#",to:"/admin/addProducts"}},[t._v(" AddProducts ")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",class:{active:"/admin/orderList"==t.$route.path},attrs:{href:"#",to:"/admin/orderList"}},[t._v(" OderList ")])],1)])])])},K=[],W={data:function(){return{}}},J=W,V=Object(y["a"])(J,z,K,!1,null,null,null),Y=V.exports,Q={name:"dashboard",components:{navbar:H,sidebar:Y,alert:I},created:function(){var t=document.cookie.replace(/(?:(?:^|.*;\s*)hanCookie\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=t}},X=Q,Z=Object(y["a"])(X,R,M,!1,null,null,null),tt=Z.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container py-3"},[a("editProduct",{attrs:{product:{},isAdd:!0}})],1)},at=[],st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"image"}},[t._v("輸入圖片網址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newProduct.imgUrl,expression:"newProduct.imgUrl"}],staticClass:"form-control",attrs:{type:"text",id:"image",placeholder:"請輸入圖片連結"},domProps:{value:t.newProduct.imgUrl},on:{input:function(e){e.target.composing||t.$set(t.newProduct,"imgUrl",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"customFile"}},[t._v("或 上傳圖片 "),t.fileUplodaing?a("i",{staticClass:"fas fa-spinner fa-pulse"}):t._e()]),a("input",{ref:"fileInfo",staticClass:"form-control",attrs:{type:"file",id:"customFile"},on:{change:t.uploadFile}})]),a("img",{staticClass:"img-fluid",attrs:{src:t.newProduct.imgUrl,alt:""}})]),a("div",{staticClass:"col-sm-8"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("標題")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newProduct.title,expression:"newProduct.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.newProduct.title},on:{input:function(e){e.target.composing||t.$set(t.newProduct,"title",e.target.value)}}})]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"category"}},[t._v("分類")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.newProduct.category,expression:"newProduct.category"}],staticClass:"custom-select",attrs:{id:"category"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newProduct,"category",e.target.multiple?a:a[0])}}},[a("option",{attrs:{selected:"",disabled:""}},[t._v("請選擇商品分類")]),a("option",{attrs:{value:"ring"}},[t._v("RING")]),a("option",{attrs:{value:"necklace"}},[t._v("NECKLACE")]),a("option",{attrs:{value:"earring"}},[t._v("EARRING")]),a("option",{attrs:{value:"bracelet"}},[t._v("BRACELET")]),a("option",{attrs:{value:"others"}},[t._v("OTHERS")])])]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("單位")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newProduct.unit,expression:"newProduct.unit"}],staticClass:"form-control",attrs:{type:"unit",id:"unit",placeholder:"請輸入單位"},domProps:{value:t.newProduct.unit},on:{input:function(e){e.target.composing||t.$set(t.newProduct,"unit",e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"origin_price"}},[t._v("原價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newProduct.origin_price,expression:"newProduct.origin_price"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",min:"0",placeholder:"請輸入原價"},domProps:{value:t.newProduct.origin_price},on:{input:function(e){e.target.composing||t.$set(t.newProduct,"origin_price",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("售價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newProduct.price,expression:"newProduct.price"}],staticClass:"form-control",attrs:{type:"number",id:"price",min:"0",placeholder:"請輸入售價"},domProps:{value:t.newProduct.price},on:{input:function(e){e.target.composing||t.$set(t.newProduct,"price",e.target.value)}}})])]),a("hr"),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[t._v("產品描述")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newProduct.description,expression:"newProduct.description"}],staticClass:"form-control",attrs:{type:"text",id:"description",placeholder:"請輸入產品描述"},domProps:{value:t.newProduct.description},on:{input:function(e){e.target.composing||t.$set(t.newProduct,"description",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"content"}},[t._v("說明內容")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newProduct.content,expression:"newProduct.content"}],staticClass:"form-control",attrs:{type:"text",id:"content",placeholder:"請輸入產品說明內容"},domProps:{value:t.newProduct.content},on:{input:function(e){e.target.composing||t.$set(t.newProduct,"content",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newProduct.is_enabled,expression:"newProduct.is_enabled"}],staticClass:"form-check-input",attrs:{type:"radio",id:"is_enabled_true",value:"1"},domProps:{checked:t._q(t.newProduct.is_enabled,"1")},on:{change:function(e){return t.$set(t.newProduct,"is_enabled","1")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"is_enabled_true"}},[t._v(" 啟用 ")])]),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newProduct.is_enabled,expression:"newProduct.is_enabled"}],staticClass:"form-check-input",attrs:{type:"radio",id:"is_enabled_false",value:"0"},domProps:{checked:t._q(t.newProduct.is_enabled,"0")},on:{change:function(e){return t.$set(t.newProduct,"is_enabled","0")}}}),a("label",{staticClass:"form-check-label text-danger",attrs:{for:"is_enabled_false"}},[t._v(" 不啟用 ")])])]),a("div",{staticClass:"w-100 text-right"},[a("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:t.addNewProduct}},[t._v("確認送出")])])])])])},rt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",[a("span",[t._v("產品資訊")])])}],it=a("5530"),ot={props:["product","isAdd"],data:function(){return{newProduct:this.product,addStatus:this.isAdd,fileUplodaing:!1}},methods:{addNewProduct:function(){var t=Object(it["a"])({},this.newProduct),e=this.addStatus;this.$store.dispatch("updateProducts",{productsObj:t,isAdd:e}),this.addStatus&&(this.newProduct={})},uploadFile:function(){var t=this,e=this.$refs.fileInfo.files[0],a=new FormData;a.append("file-to-upload",e);var s="".concat("https://vue-course-api.hexschool.io","/api/").concat("hanstore","/admin/upload"),r=this;this.fileUplodaing=!0,this.$http.post(s,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){if(t.fileUplodaing=!1,e.data.success){r.$set(r.newProduct,"imgUrl",e.data.imageUrl);var a="圖片上傳成功 !",s="success";r.$store.dispatch("updateAlert",{message:a,status:s})}else{var i="圖片上傳失敗 !",o="danger";r.$store.dispatch("updateAlert",{message:i,status:o})}}))}}},nt=ot,ct=Object(y["a"])(nt,st,rt,!1,null,null,null),lt=ct.exports,dt={name:"addProducts",components:{editProduct:lt}},ut=dt,pt=Object(y["a"])(ut,et,at,!1,null,null,null),mt=pt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"py-2"},[a("div",{staticStyle:{"overflow-x":"auto"}},[a("table",{staticClass:"table table-hover",staticStyle:{"min-width":"528px"}},[t._m(0),a("tbody",{staticClass:"text-center"},t._l(t.products,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-left"},[t._v(t._s(e.title))]),a("td",[t._v(t._s(e.category))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.origin_price)))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.price)))]),a("td",[1==e.is_enabled?a("span",{staticClass:"text-success"},[t._v("是")]):a("span",{staticClass:"text-danger"},[t._v("否")])]),a("td",[a("div",{staticClass:"btn-group btn-group-sm",attrs:{role:"group","aria-label":"Basic example"}},[a("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:function(a){return t.editProduct(e)}}},[t._v("編輯")]),a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(a){return t.showDelModal(e)}}},[t._v("刪除")])])])])})),0)])]),a("pagination",{attrs:{pages:t.paginationObj}}),a("div",{staticClass:"modal fade",attrs:{id:"productModal","data-backdrop":"static","data-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",staticStyle:{"max-width":"800px"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header p-2"},[a("button",{staticClass:"btn btn-sm btn-outline-secondary ml-auto",attrs:{type:"button"},on:{click:t.hideMoldal}},[t._v("close")])]),a("div",{staticClass:"modal-body"},[t.editItem?a("editProduct",{attrs:{product:t.editItem,isAdd:!1}}):t._e()],1)])])]),a("div",{staticClass:"modal fade",attrs:{id:"removeProductModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-body"},[t._v(" 操作提示："),a("br"),t._v(' 此刪除動作將無法復原，請再次確認是否要刪除 "'+t._s(t.removeItem.title)+'" ? ')]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:t.removeProduct}},[t._v("確認刪除")])])])])])],1)},ht=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"text-center"},[a("tr",[a("th",{staticClass:"text-left",staticStyle:{width:"250px"},attrs:{scope:"col"}},[t._v("產品名稱")]),a("th",{attrs:{scope:"col"}},[t._v("分類")]),a("th",{attrs:{scope:"col"}},[t._v("原價")]),a("th",{attrs:{scope:"col"}},[t._v("售價")]),a("th",{attrs:{scope:"col"}},[t._v("啟用")]),a("th",{attrs:{scope:"col"}},[t._v("編輯")])])])}],ft=a("1157"),gt=a.n(ft),_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",{staticClass:"pagination justify-content-center"},[a("li",{staticClass:"page-item",class:{disabled:!t.pages.has_pre}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.toPage(t.pages.current_page-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pages.total_pages,(function(e,s){return a("li",{key:s,staticClass:"page-item",class:{active:e===t.pages.current_page}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.toPage(e)}}},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",class:{disabled:!t.pages.has_next}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.toPage(t.pages.current_page+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])},bt=[],Ct={props:["pages"],methods:{toPage:function(t){this.$store.dispatch("getProducts",t)}}},yt=Ct,Pt=Object(y["a"])(yt,_t,bt,!1,null,null,null),xt=Pt.exports,wt={components:{editProduct:lt,pagination:xt},data:function(){return{editItem:"",removeItem:""}},created:function(){this.$store.dispatch("getProducts")},methods:{getProducts:function(){this.$store.dispatch("getProducts")},editProduct:function(t){this.editItem=Object(it["a"])({},t),gt()("#productModal").modal("show")},hideMoldal:function(){gt()("#productModal").modal("hide"),this.editItem=""},showDelModal:function(t){gt()("#removeProductModal").modal("show"),this.removeItem=t},removeProduct:function(){this.$store.dispatch("updateLoading",!0);var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("hanstore","/admin/product/").concat(this.removeItem.id),e=this;this.$http.delete(t).then((function(t){if(t.data.success){gt()("#removeProductModal").modal("hide"),e.getProducts();var a="刪除產品成功 !",s="success";e.$store.dispatch("updateAlert",{message:a,status:s})}else{gt()("#removeProductModal").modal("hide"),e.$store.dispatch("updateLoading",!1);var r="刪除產品失敗 !",i="danger";e.$store.dispatch("updateAlert",{message:r,status:i})}}))}},computed:{products:function(){return this.$store.state.backstageProducts},paginationObj:function(){return this.$store.state.paginationObj}}},kt=wt,$t=Object(y["a"])(kt,vt,ht,!1,null,null,null),Lt=$t.exports,Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"py-2"},[a("div",{staticStyle:{"overflow-x":"auto"}},[a("table",{staticClass:"table table-hover",staticStyle:{"min-width":"528px"}},[t._m(0),a("tbody",{staticClass:"text-left"},t._l(t.orderList,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.user.name))]),a("td",[t._v(t._s(e.user.tel))]),a("td",[t._v(t._s(e.user.address))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.total)))]),a("td",{staticClass:"text-center"},[e.is_paid?a("span",{staticClass:"text-success"},[t._v("已付款")]):a("span",{staticClass:"text-danger"},[t._v("尚未付款")])]),a("td",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-sm btn-outline-dark",attrs:{type:"button"},on:{click:function(a){return t.modalShow(e.products)}}},[t._v("查看")])])])})),0)])]),a("pagination",{attrs:{pages:t.pagination}}),a("div",{staticClass:"modal fade",attrs:{id:"orderDetails",tabindex:"-1","aria-labelledby":"orderDetailsLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",staticStyle:{"max-width":"800px"}},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[a("order-details",{attrs:{products:t.staredOrder}})],1)])])])],1)},Et=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",{staticClass:"text-center"},[a("th",{attrs:{scope:"col"}},[t._v("買家姓名")]),a("th",{attrs:{scope:"col"}},[t._v("聯絡電話")]),a("th",{attrs:{scope:"col"}},[t._v("寄件地址")]),a("th",{attrs:{scope:"col"}},[t._v("訂單金額")]),a("th",{attrs:{scope:"col"}},[t._v("付款狀態")]),a("th",{attrs:{scope:"col"}},[t._v("商品內容")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"orderDetailsLabel"}},[t._v("訂單商品詳情")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",{staticClass:"pagination justify-content-center"},[a("li",{staticClass:"page-item",class:{disabled:!t.pages.has_pre}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.toPage(t.pages.current_page-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pages.total_pages,(function(e,s){return a("li",{key:s,staticClass:"page-item",class:{active:e===t.pages.current_page}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.toPage(e)}}},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",class:{disabled:!t.pages.has_next}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.toPage(t.pages.current_page+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])},St=[],It={props:["pages"],methods:{toPage:function(t){this.$store.dispatch("getOrderList",t)}}},Nt=It,Tt=Object(y["a"])(Nt,At,St,!1,null,null,null),jt=Tt.exports,Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("table",{staticClass:"table table-hover"},[a("tbody",[t._l(t.products,(function(e){return[a("tr",{key:e.product.id},[a("td",[a("div",{staticClass:"single-product-img",staticStyle:{width:"100px",height:"100px"},style:{backgroundImage:"url("+e.product.imgUrl+")"}})]),a("td",[a("h6",{staticClass:"mt-0"},[t._v(t._s(e.product.title))])]),a("td",[t._v("數量："+t._s(e.qty))]),a("td",[t._v(t._s(t._f("currency")(e.product.price)))])])]}))],2)])])},Rt=[],Mt={props:["products"]},Ut=Mt,Gt=Object(y["a"])(Ut,Dt,Rt,!1,null,null,null),qt=Gt.exports,Bt={components:{pagination:jt,orderDetails:qt},data:function(){return{staredOrder:{}}},created:function(){this.$store.dispatch("getOrderList")},methods:{modalShow:function(t){this.staredOrder=Object(it["a"])({},t),gt()("#orderDetails").modal("show")}},computed:{orderList:function(){return this.$store.state.backstageOrderList},pagination:function(){return this.$store.state.orderPagination}}},Ft=Bt,Ht=Object(y["a"])(Ft,Ot,Et,!1,null,null,null),zt=Ht.exports,Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{on:{click:function(e){t.navbarToggle=!1}}},[a("header",{staticClass:"text-center pt-3 sticky-top header-style"},[a("button",{staticClass:"navbar-store-btn",on:{click:function(e){e.stopPropagation(),t.navbarToggle=!t.navbarToggle}}},[a("i",{staticClass:"fas fa-bars"})]),a("h1",{staticClass:"index-title mx-auto d-inline-block"},[a("router-link",{attrs:{to:"/"}},[a("i",{staticClass:"far fa-gem"}),t._v(" S U N S E T")])],1),a("ul",{staticClass:"top-bar list-style-none mb-0"},[a("li",{staticClass:"topbar-item"},[a("a",{attrs:{href:"#"},on:{click:function(e){t.isSearch=!t.isSearch}}},[a("i",{staticClass:"fas fa-search"})])]),a("li",{staticClass:"topbar-item"},[a("router-link",{attrs:{to:"/login"}},[a("i",{staticClass:"far fa-user"})])],1),a("li",{staticClass:"topbar-item"},[a("router-link",{attrs:{to:"/cart"}},[a("i",{staticClass:"fas fa-shopping-cart"}),t.cartLength&&t.cartLength.length>0?a("div",{staticClass:"rounded-circle bg-danger d-inline-block text-white position-absolute",staticStyle:{"font-size":"0.5rem",width:"18px",height:"18px",right:"-3px"}},[t._v(" "+t._s(t.cartLength.length)+" ")]):t._e()])],1)]),a("ul",{staticClass:"navbar-store list-style-none",class:{"navbar-store-out":t.navbarToggle},on:{click:t.checkProducts}},[a("li",{staticClass:"navbar-store-item"},[a("router-link",{class:{active:"ALL"===t.isStared},attrs:{to:"/"}},[t._v("ALL")])],1),a("li",{staticClass:"navbar-store-item"},[a("router-link",{class:{active:"RING"===t.isStared},attrs:{to:"/"}},[t._v("RING")])],1),a("li",{staticClass:"navbar-store-item"},[a("router-link",{class:{active:"NECKLACE"===t.isStared},attrs:{to:"/"}},[t._v("NECKLACE")])],1),a("li",{staticClass:"navbar-store-item"},[a("router-link",{class:{active:"EARRING"===t.isStared},attrs:{to:"/"}},[t._v("EARRING")])],1),a("li",{staticClass:"navbar-store-item"},[a("router-link",{class:{active:"BRACELET"===t.isStared},attrs:{to:"/"}},[t._v("BRACELET")])],1),a("li",{staticClass:"navbar-store-item"},[a("router-link",{class:{active:"OTHERS"===t.isStared},attrs:{to:"/"}},[t._v("OTHERS")])],1)])]),a("div",{staticClass:"container py-3"},[t.isSearch?a("div",{staticClass:"input-group mb-3 w-75 ml-auto"},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model.trim",value:t.searchStr,expression:"searchStr",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入商品關鍵字，(如：金、銀、編織 ...等)"},domProps:{value:t.searchStr},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)},input:function(e){e.target.composing||(t.searchStr=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary",on:{click:t.search}},[a("i",{staticClass:"fas fa-search"}),t._v(" Search ")])])]):t._e(),a("alert"),a("router-view")],1),a("footer",{staticClass:"bg-footer"},[a("div",{staticClass:"container py-3"},[a("div",{staticClass:"row border-bottom border-white"},[a("div",{staticClass:"col-12 col-lg-6 order-lg-last py-3 border-bottom-md"},[a("h2",{staticClass:"index-title text-center"},[a("router-link",{attrs:{to:"/"}},[a("i",{staticClass:"far fa-gem"}),t._v(" S U N S E T")])],1),t._m(0)]),t._m(1),t._m(2)]),t._m(3)])]),t.toTopBtn?a("div",{staticClass:"toTopBtn",on:{click:t.scrollTop}},[a("i",{staticClass:"fas fa-angle-double-up"})]):t._e()])},Wt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center"},[a("a",{staticClass:"footer-link h2 d-inline-block",attrs:{href:"#"}},[a("i",{staticClass:"fab fa-instagram"})]),a("a",{staticClass:"footer-link h2 d-inline-block",attrs:{href:"#"}},[a("i",{staticClass:"fab fa-facebook-square m-3"})]),a("a",{staticClass:"footer-link h2 d-inline-block",attrs:{href:"#"}},[a("i",{staticClass:"fab fa-twitter-square"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 col-md-6 col-lg-4 text-color py-3"},[a("h5",{staticClass:"font-weight-bold"},[t._v("關於我們")]),a("ul",{staticClass:"list-style-none ml-3 p-0"},[a("li",[a("i",{staticClass:"fas fa-phone"}),t._v(" 公司電話｜+886-2-22221234 ")]),a("li",[a("a",{staticClass:"footer-link",attrs:{href:"mailto:cookie5year@gmail.com.tw"}},[a("i",{staticClass:"far fa-envelope"}),t._v(" 電子信箱｜cookie5year@gmail.com.tw ")])]),a("li",[a("p",{staticClass:"mb-0"},[a("i",{staticClass:"far fa-clock"}),t._v(" 營業時間｜平日09:00-18:00")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 col-md-6 col-lg-2 text-color py-3"},[a("h5",{staticClass:"font-weight-bold"},[t._v("服務內容")]),a("ul",{staticClass:"list-style-none ml-3 p-0"},[a("li",[a("a",{staticClass:"footer-link",attrs:{href:"#"}},[t._v("購物須知")])]),a("li",[a("a",{staticClass:"footer-link",attrs:{href:"#"}},[t._v("售後服務")])]),a("li",[a("a",{staticClass:"footer-link",attrs:{href:"#"}},[t._v("海外訂購")])]),a("li",[a("a",{staticClass:"footer-link",attrs:{href:"#"}},[t._v("165 防詐騙")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"my-3 text-color"},[t._v("Image Resource: "),a("a",{attrs:{target:"_blank",href:"https://unsplash.com/"}},[t._v("unsplash")]),a("br"),t._v(" Work by: Hsueh ")])}],Jt={components:{alert:I},directives:{focus:{inserted:function(t){t.focus()}}},data:function(){return{isSearch:!1,searchStr:"",navbarToggle:!1,toTopBtn:!1,isStared:""}},methods:{search:function(){"/"!==this.$route.path&&this.$router.push("/"),this.$store.dispatch("searchProduct",this.searchStr)},checkTopBtn:function(){window.scrollY>280?this.toTopBtn=!0:this.toTopBtn=!1},scrollTop:function(){document.documentElement.scrollTo({top:0,behavior:"smooth"})},checkProducts:function(t){"A"===t.target.nodeName&&(this.isStared=t.target.innerText,this.$store.dispatch("filterList",this.isStared.toLowerCase()),this.scrollTop())}},computed:{cartLength:function(){return this.$store.state.customCart.carts}},created:function(){this.$store.dispatch("getCustomProductsAll"),this.$store.dispatch("getCart")},mounted:function(){window.addEventListener("scroll",this.checkTopBtn,!1)},destroyed:function(){window.removeEventListener("scroll",this.checkTopBtn)}},Vt=Jt,Yt=Object(y["a"])(Vt,Kt,Wt,!1,null,null,null),Qt=Yt.exports,Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[t._l(t.products,(function(e){return a("div",{key:e.id,staticClass:"col-6 col-sm-4 col-lg-3 bg-light py-3 text-center"},[a("div",{staticClass:"d-flex flex-column justify-content-between h-100"},[a("router-link",{staticClass:"text-decoration-none text-dark",attrs:{to:"/product/"+e.id}},[a("div",{staticClass:"product-img",style:{backgroundImage:"url("+e.imgUrl+")"}}),a("h6",[t._v(t._s(e.title))])]),a("h6",{staticClass:"font-weight-bold",class:{"text-danger":e.origin_price&&e.origin_price>e.price}},[e.origin_price&&e.origin_price>e.price?a("small",{staticClass:"text-dark mr-2",staticStyle:{"text-decoration":"line-through"}},[t._v(" "+t._s(t._f("currency")(e.origin_price))+" ")]):t._e(),t._v(" "+t._s(t._f("currency")(e.price))+" ")]),a("button",{staticClass:"btn btn-light btn-sm border border-secondary w-100 text-secondary",attrs:{type:"button",disabled:0==e.is_enabled},on:{click:function(a){return t.addToCart(e.id)}}},[1==e.is_enabled?a("span",[t.cartLoadingItem===e.id?a("i",{staticClass:"fas fa-spinner fa-pulse"}):t._e(),a("i",{staticClass:"fas fa-shopping-cart"}),t._v(" Add to cart ")]):t._e(),0==e.is_enabled?a("span",[a("i",{staticClass:"fas fa-shopping-cart"}),t._v(" Sold out ")]):t._e()])],1)])})),t.pageLength>20?a("ul",{staticClass:"pagination w-100 justify-content-center my-4"},[1!=t.focusPage?a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link text-secondary",attrs:{href:"#"},on:{click:function(e){return t.shiftPage(t.focusPage-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]):t._e(),t._l(t.pages,(function(e,s){return a("li",{key:s,staticClass:"page-item",class:{"cus-page-active":t.focusPage===e}},[a("a",{staticClass:"page-link text-secondary ",attrs:{href:"#"},on:{click:function(a){return t.shiftPage(e)}}},[t._v(t._s(e))])])})),t.pages!=t.focusPage?a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link text-secondary",attrs:{href:"#"},on:{click:function(e){return t.shiftPage(t.focusPage+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])]):t._e()],2):t._e()],2)},Zt=[],te={data:function(){return{cartLoadingItem:""}},methods:{shiftPage:function(t){this.$store.dispatch("sliceList",t)},addToCart:function(t){var e=this;this.cartLoadingItem=t;var a={product_id:t,qty:1},s=this,r="".concat("https://vue-course-api.hexschool.io","/api/").concat("hanstore","/cart");this.$http.post(r,{data:a}).then((function(t){if(t.data.success){var a="商品已成功加入購物車 !",r="secondary";s.$store.dispatch("updateAlert",{message:a,status:r}),s.$store.dispatch("getCart")}else{var i="加入購物車失敗，請稍後再試 !",o="danger";s.$store.dispatch("updateAlert",{message:i,status:o})}e.cartLoadingItem=""}))}},computed:{products:function(){return this.$store.state.sliceProductsList},pages:function(){return this.$store.state.storePages},pageLength:function(){return this.$store.state.filterProductsList.length},focusPage:function(){return this.$store.state.staredPage}}},ee=te,ae=Object(y["a"])(ee,Xt,Zt,!1,null,null,null),se=ae.exports,re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.singleProduct?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-md-6"},[a("div",{staticClass:"single-product-img",style:{backgroundImage:"url("+t.singleProduct.imgUrl+")"}})]),a("div",{staticClass:"col-12 col-md-6"},[a("h4",{staticClass:"text-center my-3"},[t._v(t._s(t.singleProduct.title))]),a("div",{staticClass:"row h-50"},[a("div",{staticClass:"col-12 col-md-6 d-flex flex-column justify-content-end"},[a("div",[a("div",{staticClass:"d-flex justify-content-center\n          justify-content-md-start align-items-center mb-4"},[a("h6",[t._v("售價：")]),a("h4",{staticClass:"font-weight-bold",class:{"text-danger":t.singleProduct.origin_price&&t.singleProduct.origin_price>t.singleProduct.price}},[t.singleProduct.origin_price&&t.singleProduct.origin_price>t.singleProduct.price?a("small",{staticClass:"text-dark mr-2",staticStyle:{"text-decoration":"line-through"}},[t._v(" "+t._s(t._f("currency")(t.singleProduct.origin_price))+" ")]):t._e(),t._v(" "+t._s(t._f("currency")(t.singleProduct.price))+" ")])]),a("div",{staticClass:"input-group mb-3"},[t.orderNumber>1?a("div",{staticClass:"input-group-prepend"},[a("button",{staticClass:"btn btn-outline-secondary",on:{click:function(e){return t.countOrderNumber(-1)}}},[t._v("-")])]):t._e(),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderNumber,expression:"orderNumber"}],staticClass:"form-control text-center",attrs:{type:"number",min:"1"},domProps:{value:t.orderNumber},on:{input:function(e){e.target.composing||(t.orderNumber=e.target.value)}}}),a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[t._v(t._s(t.singleProduct.unit))])]),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary",on:{click:function(e){return t.countOrderNumber(1)}}},[t._v("+")])])])])]),a("div",{staticClass:"col-12 col-md-6 d-flex flex-column justify-content-end"},["1"===t.singleProduct.is_enabled?a("button",{staticClass:"btn btn-outline-secondary w-100 mb-3",on:{click:function(e){return t.addToCart(t.singleProduct.id)}}},[t.cartLoading?a("i",{staticClass:"fas fa-spinner fa-pulse"}):t._e(),t._v(" 加入購物車")]):t._e(),a("button",{staticClass:"btn btn-outline-danger w-100 mb-3",attrs:{disabled:"0"===t.singleProduct.is_enabled},on:{click:function(e){return t.quickBuy(t.singleProduct.id)}}},["1"===t.singleProduct.is_enabled?a("span",[t._v("立即購買")]):t._e(),"0"===t.singleProduct.is_enabled?a("span",[t._v("已完售")]):t._e()])])])]),a("div",{staticClass:"col-12 py-3 text-center"},[a("h6",{staticClass:"bg-light py-2 border-bottom mb-4"},[t._v("商品說明")]),a("p",[t._v("全商品為現貨出售，下單前務必詳閱購物須知及售後服務")]),a("p",{domProps:{innerHTML:t._s(t.singleProduct.description)}}),a("p",{domProps:{innerHTML:t._s(t.singleProduct.content)}})])]):t._e()},ie=[],oe=(a("a9e3"),a("d3b7"),{data:function(){return{orderNumber:1,cartLoading:!1}},created:function(){this.$store.dispatch("getSingelProduct",this.$route.params.id)},computed:{singleProduct:function(){return this.$route.params.id===this.$store.state.singleProduct.id?this.$store.state.singleProduct:""}},methods:{countOrderNumber:function(t){this.orderNumber=Number(this.orderNumber)+t},addToCart:function(t,e){var a=this;this.cartLoading=!0;var s={product_id:t,qty:Number(this.orderNumber)},r=this,i="".concat("https://vue-course-api.hexschool.io","/api/").concat("hanstore","/cart");this.$http.post(i,{data:s}).then((function(t){if(t.data.success){var e="商品已成功加入購物車 !",s="secondary";r.$store.dispatch("updateAlert",{message:e,status:s}),r.$store.dispatch("getCart")}else{var i="加入購物車失敗，請稍後再試 !",o="danger";r.$store.dispatch("updateAlert",{message:i,status:o})}a.cartLoading=!1})).finally((function(){e&&r.$router.push("/cart")}))},quickBuy:function(t){this.addToCart(t,!0)}}}),ne=oe,ce=Object(y["a"])(ne,re,ie,!1,null,null,null),le=ce.exports,de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row justify-content-center"},[0===t.cartData.total?a("h6",{staticClass:"my-5"},[t._v(" 目前還尚未有購物車內容哦，趕快去逛逛吧 ! ")]):t._e(),t.cartData.total>0?a("div",{staticClass:"col-12 col-md-10"},[a("table",{staticClass:"table table-hover"},[a("tbody",[t._l(t.cartData.carts,(function(e){return[a("tr",{key:e.id},[a("td",[a("div",{staticClass:"single-product-img",staticStyle:{width:"100px",height:"100px"},style:{backgroundImage:"url("+e.product.imgUrl+")"}})]),a("td",[a("h6",{staticClass:"mt-0"},[t._v(t._s(e.product.title))])]),a("td",[t._v(t._s(e.qty+e.product.unit))]),a("td",[t._v(t._s(t._f("currency")(e.product.price)))]),a("td",[a("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.removeCart(e.id)}}},[a("i",{staticClass:"far fa-trash-alt"}),t.removeLoading?a("i",{staticClass:"fas fa-spinner fa-pulse ml-1"}):t._e()])])])]}))],2)]),a("hr"),a("h6",{staticClass:"text-right mb-3"},[t._v("總金額："),a("strong",[t._v(t._s(t._f("currency")(t.cartData.total)))])]),a("div",{staticClass:"text-right"},[a("router-link",{staticClass:"btn btn-outline-success ml-auto",attrs:{to:"/order"}},[t._v("結帳付款去 ")])],1)]):t._e()])},ue=[],pe={data:function(){return{removeLoading:!1}},methods:{removeCart:function(t){this.removeLoading=!0;var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("hanstore","/cart/").concat(t);this.$http.delete(a).then((function(t){if(e.removeLoading=!1,t.data.success){var a="商品已成功移除購物車 !",s="secondary";e.$store.dispatch("updateAlert",{message:a,status:s}),e.$store.dispatch("getCart")}else{var r="商品移除購物車失敗，請稍後再試 !",i="danger";e.$store.dispatch("updateAlert",{message:r,status:i})}}))}},computed:{cartData:function(){return this.$store.state.customCart}}},me=pe,ve=Object(y["a"])(me,de,ue,!1,null,null,null),he=ve.exports,fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-12 col-md-7 py-3"},[a("h4",{staticClass:"text-center mb-5"},[t._v("建立訂單資訊")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"user"}},[t._v("訂購 / 收件人")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model.trim",value:t.form.user.name,expression:"form.user.name",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",id:"user",placeholder:"請輸入收件人姓名",name:"name"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.errors.has("name")?a("small",{staticClass:"text-danger"},[t._v(t._s("請輸入完整收件人姓名"))]):t._e()])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"useremail"}},[t._v("電子信箱")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",class:{"is-invalid":t.errors.first("email")},attrs:{type:"email",id:"useremail",placeholder:"請輸入 Email 信箱",name:"email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),a("small",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))])]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"tel"}},[t._v("連絡電話")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model.trim",value:t.form.user.tel,expression:"form.user.tel",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":t.errors.has("tel")},attrs:{type:"text",id:"tel",placeholder:"請輸入您的連絡電話",name:"tel"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.errors.has("tel")?a("small",{staticClass:"text-danger"},[t._v(t._s("請輸入您的連絡電話"))]):t._e()])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"address"}},[t._v("收件地址")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model.trim",value:t.form.user.address,expression:"form.user.address",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",id:"address",placeholder:"請輸入收件地址",name:"address"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.errors.has("address")?a("small",{staticClass:"text-danger"},[t._v(t._s("請輸入您的收件地址"))]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"ordermessage"}},[t._v("備註留言")]),a("textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model.trim",value:t.form.message,expression:"form.message",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":t.errors.has("message")},attrs:{id:"ordermessage",rows:"3",name:"message"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.errors.has("message")?a("small",{staticClass:"text-danger"},[t._v(t._s("請輸入備註資料"))]):t._e()]),a("button",{staticClass:"btn btn-outline-success d-block ml-auto",attrs:{type:"submit"}},[t._v(" 送出訂單 ")])])])])},ge=[],_e={data:function(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{createOrder:function(){var t=this,e=this.form,a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("hanstore","/order");this.$validator.validate().then((function(r){if(r)t.$store.dispatch("updateLoading",!0),t.$http.post(s,{data:e}).then((function(t){if(a.$store.dispatch("updateLoading",!1),t.data.success){var e="訂單資訊已成功送出 !",s="success";a.$store.dispatch("updateAlert",{message:e,status:s}),a.$store.dispatch("getCart"),a.$router.push("/checkout/".concat(t.data.orderId))}else{var r="訂單送出失敗，請重新確認送出內容或者稍後再試 !",i="danger";a.$store.dispatch("updateAlert",{message:r,status:i})}}));else{var i="請填寫完整表單內容 !",o="danger";a.$store.dispatch("updateAlert",{message:i,status:o})}}))}}},be=_e,Ce=Object(y["a"])(be,fe,ge,!1,null,null,null),ye=Ce.exports,Pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row justify-content-center"},[t.orderItem?a("div",{staticClass:"col-12 col-md-8 py-3"},[a("h4",{staticClass:"text-center mb-5"},[t._v("付款頁面")]),a("h5",{staticClass:"font-weight-bold text-center"},[t._v("買家資訊")]),a("table",{staticClass:"table table-hover"},[a("tbody",[a("tr",[a("th",[t._v("收件人")]),a("td",[t._v(t._s(t.orderItem.user.name))])]),a("tr",[a("th",[t._v("電子信箱")]),a("td",[t._v(t._s(t.orderItem.user.email))])]),a("tr",[a("th",[t._v("連絡電話")]),a("td",[t._v(t._s(t.orderItem.user.tel))])]),a("tr",[a("th",[t._v("收件地址")]),a("td",[t._v(t._s(t.orderItem.user.address))])])])]),a("hr"),a("h5",{staticClass:"font-weight-bold text-center"},[t._v("商品明細")]),a("table",{staticClass:"table table-hover"},[t._m(0),a("tbody",[t._l(t.orderItem.products,(function(e){return[a("tr",{key:e.product_id,staticClass:"text-right"},[a("td",{staticClass:"text-left"},[t._v(t._s(e.product.title))]),a("td",[t._v(t._s(t._f("currency")(e.product.price)))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.qty))]),a("td",[t._v(t._s(t._f("currency")(e.total)))])])]}))],2)]),a("h5",{staticClass:"font-weight-bold text-right"},[t._v("消費金額："+t._s(t._f("currency")(t.orderItem.total)))]),a("hr"),a("h5",{staticClass:"font-weight-bold text-center"},[t._v("模擬付款")]),a("div",{staticClass:"input-group mb-5 text-right ml-auto"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[t._v(t._s(t._f("currency")(t.orderItem.total)))])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pay,expression:"pay"}],staticClass:"form-control text-center",class:{"is-invalid":!t.payStatus},attrs:{type:"text",placeholder:"請輸入與左方相同金額",disabled:t.completed},domProps:{value:t.pay},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.payOrder(t.orderItem.id)},input:function(e){e.target.composing||(t.pay=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn",class:{"btn-outline-danger":!t.completed,"btn-success":t.completed},attrs:{disabled:t.completed},on:{click:function(e){return t.payOrder(t.orderItem.id)}}},[t.completed?t._e():a("span",[t._v("確認付款")]),t.completed?a("span",[t._v("已完成付款")]):t._e()])])]),t.completed?a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[t._v(" 已付款完成 ! 感謝您的購買 ! ")]),a("div",{staticClass:"card-body"},[a("p",{staticClass:"card-text"},[t._v("全商品付款後，大約 3 ~ 7 個工作日內收到哦。")]),a("p",{staticClass:"card-text"},[t._v("若商品於取件後發現品質瑕疵，請於七天內與我們聯絡，即可更換其他商品。")]),a("router-link",{staticClass:"btn btn-outline-success",attrs:{to:"/"}},[t._v("繼續逛逛其他好物")])],1)]):t._e()]):t._e()])},xe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"text-center"},[a("tr",[a("th",{staticClass:"text-left",attrs:{scope:"col"}},[t._v("品項")]),a("th",{attrs:{scope:"col"}},[t._v("單價")]),a("th",{attrs:{scope:"col"}},[t._v("數量")]),a("th",{attrs:{scope:"col"}},[t._v("總價")])])])}],we={data:function(){return{orderItem:"",pay:"",payStatus:!0,completed:!1}},created:function(){var t=this.$route.params.orderId,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("hanstore","/order/").concat(t);this.getOrder(e)},methods:{getOrder:function(t){var e=this;this.$store.dispatch("updateLoading",!0),this.$http.get(t).then((function(t){if(e.$store.dispatch("updateLoading",!1),t.data.success)e.orderItem=t.data.order;else{var a="付款頁面載入失敗，請重試一次 !",s="danger";e.$store.dispatch("updateAlert",{message:a,status:s})}}))},payOrder:function(t){if(Number(this.pay)===this.orderItem.total){this.payStatus=!0;var e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("hanstore","/pay/").concat(t);this.$store.dispatch("updateLoading",!0),this.$http.post(a).then((function(t){if(e.$store.dispatch("updateLoading",!1),t.data.success){var a="已付款成功 !",s="success";e.$store.dispatch("updateAlert",{message:a,status:s}),e.completed=!0}else{var r="付款失敗，請稍後重試 !",i="danger";e.$store.dispatch("updateAlert",{message:r,status:i})}}))}else this.payStatus=!1}}},ke=we,$e=Object(y["a"])(ke,Pe,xe,!1,null,null,null),Le=$e.exports;s["a"].use(w["a"]);var Oe=new w["a"]({routes:[{path:"*",redirect:"/"},{path:"/",component:Qt,children:[{name:"customProductsList",path:"",component:se},{name:"singleProduct",path:"product/:id",component:le},{name:"login",path:"login",component:D},{name:"cart",path:"cart",component:he},{name:"order",path:"order",component:ye},{name:"checkout",path:"checkout/:orderId",component:Le}]},{path:"/admin",component:tt,meta:{requiresAuth:!0},children:[{name:"ProductsList",path:"",component:Lt,meta:{requiresAuth:!0}},{name:"addProducts",path:"addProducts",component:mt,meta:{requiresAuth:!0}},{name:"orderList",path:"orderList",component:zt,meta:{requiresAuth:!0}}]}]}),Ee=(a("b680"),function(t){var e=Number(t);return"$".concat(e.toFixed(0).replace(/./g,(function(t,e,a){var s=e&&"."!==t&&(a.length-e)%3===0?", ".concat(t).replace(/\s/g,""):t;return s})))});s["a"].use(v["a"]),s["a"].config.productionTip=!1,s["a"].use(n.a,i.a),s["a"].filter("currency",Ee),s["a"].component("Loading",l.a),s["a"].use(m["a"]);var Ae=new m["a"]({locale:"zhTW"});s["a"].use(d["a"],{events:"input|blur",i18n:Ae,dictionary:{zhTW:p.a}}),Oe.beforeEach((function(t,e,a){if(t.meta.requiresAuth){var s="".concat("https://vue-course-api.hexschool.io","/api/user/check");i.a.post(s).then((function(t){t.data.success?a():a({path:"/login"})}))}else a()})),new s["a"]({render:function(t){return t(x)},router:Oe,store:f,i18n:Ae}).$mount("#app")},"5c0b":function(t,e,a){"use strict";a("458f")}});
//# sourceMappingURL=app.53440b14.js.map